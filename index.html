<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOE Paraguay - Dashboard Interactivo 2014-2023</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <style>
        :root {
            --ine-azul: #005293;
            --ine-verde: #8DBF2D;
            --ine-gris: #4A4A4A;
            --ine-gris-claro: #F5F5F5;
            --ine-naranja: #F39200;
            --ine-rojo: #E63946;
            --ine-lila: #6A4C93;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: var(--ine-gris);
        }
        
        .navbar-brand {
            font-weight: bold;
            color: var(--ine-azul) !important;
        }
        
        .header-bg {
            background: linear-gradient(135deg, var(--ine-azul) 0%, #1a6fc4 100%);
            color: white;
            padding: 2rem 0;
            border-radius: 0 0 20px 20px;
            margin-bottom: 2rem;
        }
        
        .kpi-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            border-left: 5px solid var(--ine-azul);
            transition: transform 0.3s;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
        }
        
        .kpi-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--ine-azul);
        }
        
        .kpi-label {
            font-size: 0.9rem;
            color: var(--ine-gris);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .kpi-icon {
            font-size: 2.5rem;
            color: var(--ine-verde);
            margin-bottom: 1rem;
        }
        
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            height: 400px;
        }
        
        .chart-title {
            color: var(--ine-azul);
            font-weight: 600;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--ine-gris-claro);
            padding-bottom: 0.5rem;
        }
        
        .year-selector {
            background-color: white;
            border: 2px solid var(--ine-azul);
            color: var(--ine-azul);
            font-weight: bold;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            width: 150px;
        }
        
        .domain-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .domain-1 { background-color: rgba(0, 82, 147, 0.1); color: var(--ine-azul); }
        .domain-2 { background-color: rgba(141, 191, 45, 0.1); color: var(--ine-verde); }
        .domain-3 { background-color: rgba(243, 146, 0, 0.1); color: var(--ine-naranja); }
        .domain-4 { background-color: rgba(106, 76, 147, 0.1); color: var(--ine-lila); }
        
        .methodology-badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-right: 0.3rem;
            margin-bottom: 0.3rem;
        }
        
        footer {
            background-color: var(--ine-azul);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
            border-radius: 20px 20px 0 0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
            
            .kpi-value {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Barra de navegaci√≥n -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="https://www.ine.gov.py/assets/img/logo-ine.png" alt="INE Logo" height="40" class="me-2">
                <span>IOE Paraguay</span>
            </a>
            <div class="d-flex align-items-center">
                <span class="me-3 d-none d-md-block">Seleccionar a√±o:</span>
                <select id="yearSelector" class="year-selector">
                    <option value="2023">2023</option>
                    <option value="2022">2022</option>
                    <option value="2021">2021</option>
                    <option value="2020">2020</option>
                    <option value="2019">2019</option>
                    <option value="2018">2018</option>
                    <option value="2017">2017</option>
                    <option value="2016">2016</option>
                    <option value="2015">2015</option>
                    <option value="2014">2014</option>
                </select>
            </div>
        </div>
    </nav>

    <!-- Encabezado principal -->
    <div class="header-bg">
        <div class="container">
            <h1 class="display-5 fw-bold">Inventario de Operaciones Estad√≠sticas</h1>
            <p class="lead">Dashboard interactivo de la evoluci√≥n 2014-2023</p>
            <div class="row mt-4">
                <div class="col-md-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-white rounded-circle p-3 me-3">
                            <span style="color: var(--ine-azul); font-size: 1.5rem;">üìä</span>
                        </div>
                        <div>
                            <h5 class="mb-0">3,366</h5>
                            <small class="text-white-50">OE totales 2014-2023</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-white rounded-circle p-3 me-3">
                            <span style="color: var(--ine-verde); font-size: 1.5rem;">üèõÔ∏è</span>
                        </div>
                        <div>
                            <h5 class="mb-0">58</h5>
                            <small class="text-white-50">Organismos en 2023</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-white rounded-circle p-3 me-3">
                            <span style="color: var(--ine-naranja); font-size: 1.5rem;">üìà</span>
                        </div>
                        <div>
                            <h5 class="mb-0">390</h5>
                            <small class="text-white-50">OE en 2023</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-white rounded-circle p-3 me-3">
                            <span style="color: var(--ine-lila); font-size: 1.5rem;">üîç</span>
                        </div>
                        <div>
                            <h5 class="mb-0">10 a√±os</h5>
                            <small class="text-white-50">De datos hist√≥ricos</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="container">
        <!-- KPIs para el a√±o seleccionado -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" id="kpiTotalOE">390</div>
                    <div class="kpi-label">Operaciones Estad√≠sticas</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="kpi-card">
                    <div class="kpi-icon">üèõÔ∏è</div>
                    <div class="kpi-value" id="kpiOrganismos">58</div>
                    <div class="kpi-label">Organismos</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="kpi-card">
                    <div class="kpi-icon">üì¢</div>
                    <div class="kpi-value" id="kpiDifusion">72.3%</div>
                    <div class="kpi-label">Difusi√≥n P√∫blica</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="kpi-card">
                    <div class="kpi-icon">üîÑ</div>
                    <div class="kpi-value" id="kpiRecoleccion">84.1%</div>
                    <div class="kpi-label">Recolecci√≥n Regular</div>
                </div>
            </div>
        </div>

        <!-- Primera fila de gr√°ficos -->
        <div class="row">
            <div class="col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Total de Operaciones Estad√≠sticas por A√±o</h4>
                    <canvas id="chartTotalOE"></canvas>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Distribuci√≥n por Dominio Tem√°tico</h4>
                    <canvas id="chartDominios"></canvas>
                </div>
            </div>
        </div>

        <!-- Segunda fila de gr√°ficos -->
        <div class="row">
            <div class="col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Top 5 Organismos con m√°s OE</h4>
                    <canvas id="chartTopOrganismos"></canvas>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Metodolog√≠as Utilizadas</h4>
                    <canvas id="chartMetodologias"></canvas>
                </div>
            </div>
        </div>

        <!-- Tercera fila de gr√°ficos -->
        <div class="row">
            <div class="col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Participaci√≥n de Otros Organismos</h4>
                    <canvas id="chartParticipacion"></canvas>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Periodicidad de la Difusi√≥n</h4>
                    <canvas id="chartPeriodicidadDifusion"></canvas>
                </div>
            </div>
        </div>

        <!-- Gr√°ficos de serie hist√≥rica -->
        <div class="row">
            <div class="col-12">
                <div class="chart-container" style="height: 450px;">
                    <h4 class="chart-title">Evoluci√≥n de Dominios Tem√°ticos (2014-2023)</h4>
                    <canvas id="chartEvolucionDominios"></canvas>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="chart-container" style="height: 450px;">
                    <h4 class="chart-title">Evoluci√≥n de Metodolog√≠as (2014-2023)</h4>
                    <canvas id="chartEvolucionMetodologias"></canvas>
                </div>
            </div>
        </div>

        <!-- Informaci√≥n sobre dominios -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header" style="background-color: var(--ine-azul); color: white;">
                        <h5 class="mb-0">Dominios Tem√°ticos del IOE</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <h6><span class="domain-badge domain-1">Dominio 1</span></h6>
                                <p class="mb-0"><strong>Demograf√≠a y Estad√≠sticas Sociales</strong></p>
                                <small>Incluye: Salud, Poblaci√≥n, Trabajo, Educaci√≥n, Justicia, G√©nero, Vivienda, etc.</small>
                            </div>
                            <div class="col-md-3">
                                <h6><span class="domain-badge domain-2">Dominio 2</span></h6>
                                <p class="mb-0"><strong>Estad√≠sticas Econ√≥micas</strong></p>
                                <small>Incluye: Macroecon√≥micas, Finanzas, Energ√≠a, Agricultura, Industria, Comercio, etc.</small>
                            </div>
                            <div class="col-md-3">
                                <h6><span class="domain-badge domain-3">Dominio 3</span></h6>
                                <p class="mb-0"><strong>Medio Ambiente y M√∫ltiples Dominios</strong></p>
                                <small>Incluye: Medio ambiente, Anuarios, Sociedad de la informaci√≥n, Condiciones de vida</small>
                            </div>
                            <div class="col-md-3">
                                <h6><span class="domain-badge domain-4">Dominio 4</span></h6>
                                <p class="mb-0"><strong>Metodolog√≠as y Clasificaciones</strong></p>
                                <small>Incluye: Clasificaciones, Directorios, Marcos muestrales, Documentos t√©cnicos</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pie de p√°gina -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Instituto Nacional de Estad√≠stica</h5>
                    <p>Paraguay - Sistema Estad√≠stico Nacional (SISEN)</p>
                    <p>Contacto: info@ine.gov.py | Call Center 178</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p>¬© INE Paraguay, 2025</p>
                    <p>Este dashboard muestra datos del Inventario de Operaciones Estad√≠sticas 2014-2023</p>
                    <p>Los datos pueden ser reproducidos mencionando la fuente.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript con los datos y gr√°ficos -->
    <script>
        // Datos extra√≠dos del an√°lisis SPSS
        const datosIOE = {
            a√±os: [2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023],
            
            // Total de Operaciones Estad√≠sticas por a√±o
            totalOE: [241, 291, 264, 311, 346, 349, 390, 395, 389, 390],
            
            // Distribuci√≥n de dominios por a√±o (porcentajes)
            dominios: {
                demografia: [52.3, 62.2, 70.1, 71.7, 67.1, 66.5, 65.6, 67.6, 62.5, 59.5],
                economicas: [32.4, 34.4, 39.0, 36.3, 39.0, 39.8, 39.2, 39.5, 39.8, 44.6],
                medioAmbiente: [12.9, 14.8, 11.0, 12.2, 13.9, 13.2, 12.6, 10.6, 11.1, 10.0],
                metodologias: [2.9, 5.8, 7.2, 8.7, 9.2, 9.5, 8.7, 8.6, 9.0, 8.5]
            },
            
            // Metodolog√≠as por a√±o (porcentajes)
            metodologias: {
                directa: [36.1, 34.7, 33.0, 30.9, 25.4, 23.2, 20.8, 21.3, 18.0, 19.0],
                administrativas: [34.0, 32.6, 30.7, 33.4, 40.5, 44.4, 42.8, 42.3, 42.9, 46.2],
                derivadas: [26.1, 26.5, 29.9, 26.0, 24.9, 22.3, 26.2, 27.1, 29.8, 26.2],
                infraestructura: [2.9, 4.1, 3.8, 5.1, 5.5, 6.3, 6.2, 5.8, 5.9, 6.2],
                otras: [0.8, 2.1, 2.7, 4.5, 3.8, 3.7, 4.1, 3.5, 3.3, 2.6]
            },
            
            // Porcentaje de OE con participaci√≥n de otros organismos
            participacionOtros: [28.6, 30.9, 29.9, 30.5, 29.2, 26.9, 23.8, 24.3, 25.7, 28.5],
            
            // Porcentaje de difusi√≥n p√∫blica
            difusionPublica: [70.1, 72.9, 74.2, 78.5, 74.0, 73.9, 74.9, 75.9, 76.9, 72.3],
            
            // Porcentaje de recolecci√≥n regular
            recoleccionRegular: [69.7, 70.4, 69.3, 67.8, 71.1, 74.8, 76.7, 78.2, 83.0, 84.1],
            
            // Top organismos por a√±o (simplificado)
            topOrganismos: {
                2023: [
                    { nombre: "INE", cantidad: 54 },
                    { nombre: "MSPyBS", cantidad: 41 },
                    { nombre: "BCP", cantidad: 38 },
                    { nombre: "MEF", cantidad: 24 },
                    { nombre: "MOPC", cantidad: 22 }
                ],
                2022: [
                    { nombre: "INE", cantidad: 65 },
                    { nombre: "MSPyBS", cantidad: 47 },
                    { nombre: "BCP", cantidad: 36 },
                    { nombre: "MEF", cantidad: 26 },
                    { nombre: "MOPC", cantidad: 22 }
                ],
                2021: [
                    { nombre: "INE", cantidad: 78 },
                    { nombre: "MSPyBS", cantidad: 43 },
                    { nombre: "BCP", cantidad: 37 },
                    { nombre: "MEF", cantidad: 28 },
                    { nombre: "MOPC", cantidad: 17 }
                ],
                2020: [
                    { nombre: "INE", cantidad: 71 },
                    { nombre: "MSPyBS", cantidad: 41 },
                    { nombre: "BCP", cantidad: 29 },
                    { nombre: "MEF", cantidad: 31 },
                    { nombre: "MOPC", cantidad: 17 }
                ],
                2019: [
                    { nombre: "INE", cantidad: 68 },
                    { nombre: "MSPyBS", cantidad: 45 },
                    { nombre: "BCP", cantidad: 29 },
                    { nombre: "MEF", cantidad: 11 },
                    { nombre: "MOPC", cantidad: 17 }
                ],
                2018: [
                    { nombre: "INE", cantidad: 74 },
                    { nombre: "MSPyBS", cantidad: 50 },
                    { nombre: "BCP", cantidad: 27 },
                    { nombre: "MEF", cantidad: 11 },
                    { nombre: "MOPC", cantidad: 17 }
                ],
                2017: [
                    { nombre: "INE", cantidad: 74 },
                    { nombre: "MSPyBS", cantidad: 50 },
                    { nombre: "BCP", cantidad: 27 },
                    { nombre: "MEF", cantidad: 11 },
                    { nombre: "MOPC", cantidad: 9 }
                ],
                2016: [
                    { nombre: "INE", cantidad: 72 },
                    { nombre: "MSPyBS", cantidad: 38 },
                    { nombre: "BCP", cantidad: 27 },
                    { nombre: "MEF", cantidad: 10 },
                    { nombre: "MOPC", cantidad: 10 }
                ],
                2015: [
                    { nombre: "INE", cantidad: 85 },
                    { nombre: "MSPyBS", cantidad: 45 },
                    { nombre: "BCP", cantidad: 27 },
                    { nombre: "MEF", cantidad: 8 },
                    { nombre: "MOPC", cantidad: 8 }
                ],
                2014: [
                    { nombre: "INE", cantidad: 75 },
                    { nombre: "MSPyBS", cantidad: 34 },
                    { nombre: "BCP", cantidad: 26 },
                    { nombre: "MEF", cantidad: 7 },
                    { nombre: "MOPC", cantidad: 7 }
                ]
            },
            
            // Periodicidad de difusi√≥n (simplificado)
            periodicidadDifusion: {
                2023: {
                    anual: 56.0,
                    mensual: 38.0,
                    trimestral: 8.1,
                    diaria: 5.1,
                    semanal: 5.1,
                    semestral: 5.1,
                    otras: 11.6
                },
                2022: {
                    anual: 42.4,
                    mensual: 41.8,
                    trimestral: 9.9,
                    diaria: 21.1,
                    semanal: 5.6,
                    semestral: 4.6,
                    otras: 5.6
                },
                2021: {
                    anual: 41.4,
                    mensual: 43.7,
                    trimestral: 7.4,
                    diaria: 19.7,
                    semanal: 4.9,
                    semestral: 4.9,
                    otras: 3.2
                }
            },
            
            // Cantidad estimada de organismos por a√±o
            cantidadOrganismos: [45, 48, 50, 52, 54, 55, 56, 57, 58, 58]
        };

        // Variables para los gr√°ficos
        let chartTotalOE, chartDominios, chartTopOrganismos, chartMetodologias;
        let chartParticipacion, chartPeriodicidadDifusion;
        let chartEvolucionDominios, chartEvolucionMetodologias;
        
        // A√±o seleccionado inicialmente
        let a√±oActual = 2023;
        
        // Funci√≥n para actualizar todos los KPIs
        function actualizarKPIs() {
            const indice = datosIOE.a√±os.indexOf(a√±oActual);
            
            document.getElementById('kpiTotalOE').textContent = datosIOE.totalOE[indice];
            document.getElementById('kpiOrganismos').textContent = datosIOE.cantidadOrganismos[indice];
            document.getElementById('kpiDifusion').textContent = datosIOE.difusionPublica[indice].toFixed(1) + '%';
            document.getElementById('kpiRecoleccion').textContent = datosIOE.recoleccionRegular[indice].toFixed(1) + '%';
        }
        
        // Funci√≥n para inicializar/actualizar el gr√°fico de total OE
        function actualizarChartTotalOE() {
            const ctx = document.getElementById('chartTotalOE').getContext('2d');
            const indice = datosIOE.a√±os.indexOf(a√±oActual);
            
            if (chartTotalOE) chartTotalOE.destroy();
            
            // Crear colores para las barras
            const colores = datosIOE.a√±os.map((a√±o, i) => 
                a√±o === a√±oActual ? 'rgba(0, 82, 147, 0.9)' : 'rgba(0, 82, 147, 0.4)'
            );
            
            chartTotalOE = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: datosIOE.a√±os,
                    datasets: [{
                        label: 'Operaciones Estad√≠sticas',
                        data: datosIOE.totalOE,
                        backgroundColor: colores,
                        borderColor: 'rgba(0, 82, 147, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `OE: ${context.parsed.y}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Cantidad de OE'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'A√±o'
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de dominios
        function actualizarChartDominios() {
            const ctx = document.getElementById('chartDominios').getContext('2d');
            const indice = datosIOE.a√±os.indexOf(a√±oActual);
            
            if (chartDominios) chartDominios.destroy();
            
            chartDominios = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Demograf√≠a', 'Econ√≥micas', 'Medio Ambiente', 'Metodolog√≠as'],
                    datasets: [{
                        data: [
                            datosIOE.dominios.demografia[indice],
                            datosIOE.dominios.economicas[indice],
                            datosIOE.dominios.medioAmbiente[indice],
                            datosIOE.dominios.metodologias[indice]
                        ],
                        backgroundColor: [
                            'rgba(0, 82, 147, 0.8)',
                            'rgba(141, 191, 45, 0.8)',
                            'rgba(243, 146, 0, 0.8)',
                            'rgba(106, 76, 147, 0.8)'
                        ],
                        borderColor: [
                            'rgba(0, 82, 147, 1)',
                            'rgba(141, 191, 45, 1)',
                            'rgba(243, 146, 0, 1)',
                            'rgba(106, 76, 147, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed.toFixed(1)}%`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de top organismos
        function actualizarChartTopOrganismos() {
            const ctx = document.getElementById('chartTopOrganismos').getContext('2d');
            const datosOrganismos = datosIOE.topOrganismos[a√±oActual];
            
            if (chartTopOrganismos) chartTopOrganismos.destroy();
            
            chartTopOrganismos = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: datosOrganismos.map(o => o.nombre),
                    datasets: [{
                        label: 'Cantidad de OE',
                        data: datosOrganismos.map(o => o.cantidad),
                        backgroundColor: 'rgba(0, 82, 147, 0.7)',
                        borderColor: 'rgba(0, 82, 147, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `OE: ${context.parsed.x}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Cantidad de Operaciones Estad√≠sticas'
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de metodolog√≠as
        function actualizarChartMetodologias() {
            const ctx = document.getElementById('chartMetodologias').getContext('2d');
            const indice = datosIOE.a√±os.indexOf(a√±oActual);
            
            if (chartMetodologias) chartMetodologias.destroy();
            
            chartMetodologias = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Directa', 'Administrativas', 'Derivadas', 'Infraestructura', 'Otras'],
                    datasets: [{
                        label: 'Porcentaje',
                        data: [
                            datosIOE.metodologias.directa[indice],
                            datosIOE.metodologias.administrativas[indice],
                            datosIOE.metodologias.derivadas[indice],
                            datosIOE.metodologias.infraestructura[indice],
                            datosIOE.metodologias.otras[indice]
                        ],
                        backgroundColor: [
                            'rgba(0, 82, 147, 0.7)',
                            'rgba(141, 191, 45, 0.7)',
                            'rgba(243, 146, 0, 0.7)',
                            'rgba(106, 76, 147, 0.7)',
                            'rgba(230, 57, 70, 0.7)'
                        ],
                        borderColor: [
                            'rgba(0, 82, 147, 1)',
                            'rgba(141, 191, 45, 1)',
                            'rgba(243, 146, 0, 1)',
                            'rgba(106, 76, 147, 1)',
                            'rgba(230, 57, 70, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Porcentaje (%)'
                            },
                            max: 100
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de participaci√≥n
        function actualizarChartParticipacion() {
            const ctx = document.getElementById('chartParticipacion').getContext('2d');
            const indice = datosIOE.a√±os.indexOf(a√±oActual);
            
            if (chartParticipacion) chartParticipacion.destroy();
            
            // Crear colores para las barras
            const colores = datosIOE.a√±os.map((a√±o, i) => 
                a√±o === a√±oActual ? 'rgba(141, 191, 45, 0.9)' : 'rgba(141, 191, 45, 0.4)'
            );
            
            chartParticipacion = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: datosIOE.a√±os,
                    datasets: [{
                        label: 'Participaci√≥n de otros organismos',
                        data: datosIOE.participacionOtros,
                        backgroundColor: colores,
                        borderColor: 'rgba(141, 191, 45, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Porcentaje (%)'
                            },
                            max: 40
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'A√±o'
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de periodicidad de difusi√≥n
        function actualizarChartPeriodicidadDifusion() {
            const ctx = document.getElementById('chartPeriodicidadDifusion').getContext('2d');
            
            // Usar datos de 2023 como default si no hay para el a√±o seleccionado
            const datosPeriodicidad = datosIOE.periodicidadDifusion[a√±oActual] || datosIOE.periodicidadDifusion[2023];
            
            if (chartPeriodicidadDifusion) chartPeriodicidadDifusion.destroy();
            
            chartPeriodicidadDifusion = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Anual', 'Mensual', 'Trimestral', 'Diaria', 'Semanal', 'Semestral', 'Otras'],
                    datasets: [{
                        label: 'Porcentaje',
                        data: [
                            datosPeriodicidad.anual,
                            datosPeriodicidad.mensual,
                            datosPeriodicidad.trimestral,
                            datosPeriodicidad.diaria,
                            datosPeriodicidad.semanal,
                            datosPeriodicidad.semestral,
                            datosPeriodicidad.otras
                        ],
                        backgroundColor: 'rgba(106, 76, 147, 0.7)',
                        borderColor: 'rgba(106, 76, 147, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Porcentaje (%)'
                            },
                            max: 60
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de evoluci√≥n de dominios
        function actualizarChartEvolucionDominios() {
            const ctx = document.getElementById('chartEvolucionDominios').getContext('2d');
            
            if (chartEvolucionDominios) chartEvolucionDominios.destroy();
            
            chartEvolucionDominios = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: datosIOE.a√±os,
                    datasets: [
                        {
                            label: 'Demograf√≠a',
                            data: datosIOE.dominios.demografia,
                            borderColor: 'rgba(0, 82, 147, 1)',
                            backgroundColor: 'rgba(0, 82, 147, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        },
                        {
                            label: 'Econ√≥micas',
                            data: datosIOE.dominios.economicas,
                            borderColor: 'rgba(141, 191, 45, 1)',
                            backgroundColor: 'rgba(141, 191, 45, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        },
                        {
                            label: 'Medio Ambiente',
                            data: datosIOE.dominios.medioAmbiente,
                            borderColor: 'rgba(243, 146, 0, 1)',
                            backgroundColor: 'rgba(243, 146, 0, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        },
                        {
                            label: 'Metodolog√≠as',
                            data: datosIOE.dominios.metodologias,
                            borderColor: 'rgba(106, 76, 147, 1)',
                            backgroundColor: 'rgba(106, 76, 147, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Porcentaje (%)'
                            },
                            max: 80
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'A√±o'
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para actualizar el gr√°fico de evoluci√≥n de metodolog√≠as
        function actualizarChartEvolucionMetodologias() {
            const ctx = document.getElementById('chartEvolucionMetodologias').getContext('2d');
            
            if (chartEvolucionMetodologias) chartEvolucionMetodologias.destroy();
            
            chartEvolucionMetodologias = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: datosIOE.a√±os,
                    datasets: [
                        {
                            label: 'Obtenci√≥n Directa',
                            data: datosIOE.metodologias.directa,
                            borderColor: 'rgba(0, 82, 147, 1)',
                            backgroundColor: 'rgba(0, 82, 147, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        },
                        {
                            label: 'Fuentes Administrativas',
                            data: datosIOE.metodologias.administrativas,
                            borderColor: 'rgba(141, 191, 45, 1)',
                            backgroundColor: 'rgba(141, 191, 45, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        },
                        {
                            label: 'Estad√≠sticas Derivadas',
                            data: datosIOE.metodologias.derivadas,
                            borderColor: 'rgba(243, 146, 0, 1)',
                            backgroundColor: 'rgba(243, 146, 0, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        },
                        {
                            label: 'Infraestructura',
                            data: datosIOE.metodologias.infraestructura,
                            borderColor: 'rgba(106, 76, 147, 1)',
                            backgroundColor: 'rgba(106, 76, 147, 0.1)',
                            borderWidth: 3,
                            tension: 0.2,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Porcentaje (%)'
                            },
                            max: 100
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'A√±o'
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n principal para actualizar todo el dashboard
        function actualizarDashboard() {
            actualizarKPIs();
            actualizarChartTotalOE();
            actualizarChartDominios();
            actualizarChartTopOrganismos();
            actualizarChartMetodologias();
            actualizarChartParticipacion();
            actualizarChartPeriodicidadDifusion();
            actualizarChartEvolucionDominios();
            actualizarChartEvolucionMetodologias();
        }
        
        // Inicializar el dashboard cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar el selector de a√±o
            const yearSelector = document.getElementById('yearSelector');
            yearSelector.value = a√±oActual;
            
            yearSelector.addEventListener('change', function() {
                a√±oActual = parseInt(this.value);
                actualizarDashboard();
            });
            
            // Inicializar todos los gr√°ficos
            actualizarDashboard();
        });
    </script>
</body>
</html>
